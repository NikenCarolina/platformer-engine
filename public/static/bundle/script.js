(()=>{"use strict";var t,e=function(){function t(){this.observers=[],this.x=0,this.y=0}return t.prototype.attach=function(t){if(this.observers.includes(t))return console.log("Subject: Observer has been attached already");this.observers.push(t)},t.prototype.detach=function(t){if(1!==this.observers.indexOf(t))return console.log("Subject: Nonexistent observer");for(var e=0,i=this.observers;e<i.length;e++)i[e].update(this)},t.prototype.notify=function(){for(var t=0,e=this.observers;t<e.length;t++)e[t].update(this)},t.prototype.setPosition=function(t,e){this.x=t,this.y=e,this.notify()},t.prototype.draw=function(t){t.fillStyle="green",t.fillRect(this.x-5,this.y-5,10,10)},t}(),i=function(){function t(t,e,i,o){this.observers=[],this.x=t,this.y=e,this.x1=i,this.y1=o}return t.prototype.attach=function(t){if(this.observers.includes(t))return console.log("Subject: Observer has been attached already");this.observers.push(t)},t.prototype.detach=function(t){if(1!==this.observers.indexOf(t))return console.log("Subject: Nonexistent observer");for(var e=0,i=this.observers;e<i.length;e++)i[e].update(this)},t.prototype.notify=function(){for(var t=0,e=this.observers;t<e.length;t++)e[t].update(this)},t.prototype.draw=function(t){t.beginPath(),t.moveTo(this.x,this.y),t.lineTo(this.x1,this.y1),t.stroke(),this.notify()},t}(),o=function(){function t(t,e,i,o){this.xVelocity=0,this.yVelocity=0,this.yAcceleration=.98,this.x=t,this.y=e,this.width=i,this.height=o,this.ctxfillStyle="red"}return t.prototype.update=function(t){t instanceof e&&(this.isHovered(t.x,t.y)&&(this.ctxfillStyle="green"),this.isHovered(t.x,t.y)||(this.ctxfillStyle="red")),t instanceof i&&(this.y+this.height>=t.y&&this.x+this.width>=t.x&&this.x<=t.x1?this.yVelocity>0&&(this.yVelocity=0,this.yAcceleration=0,this.y=-this.height+t.y):this.yVelocity+=this.yAcceleration)},t.prototype.draw=function(t){t.fillStyle=this.ctxfillStyle,t.fillRect(this.x,this.y,this.width,this.height),this.x=this.x+this.xVelocity,this.y=this.y+this.yVelocity,this.yVelocity=this.yVelocity+this.yAcceleration+.6},t.prototype.isHovered=function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},t.prototype.jump=function(){0==this.yVelocity&&(this.yVelocity=-15)},t.prototype.moveLeft=function(){this.xVelocity=-2},t.prototype.moveRight=function(){this.xVelocity=2},t.prototype.stopX=function(){this.xVelocity=0},t}();!function(t){t.Up="ArrowUp",t.Left="ArrowLeft",t.Right="ArrowRight"}(t||(t={}));var h=document.getElementById("gameCanvas");h.width=window.innerWidth,h.height=window.innerHeight,h.style.position="absolute",h.style.top="0",h.style.left="0";var s=h.getContext("2d"),n=new e,r=new o(h.width,h.height,-10,-10),c=new o(h.width/3,h.height-h.height/3,20,20),l=new i(0,h.height-h.height/3,h.width,h.height-h.height/3),y=new i(h.width/3,h.height-h.height/2,h.width-h.width/5,h.height-h.height/2);n.attach(c),l.attach(c),y.attach(c);var d=[c,l,n,r,y];h.addEventListener("mousemove",(function(t){var e=h.getBoundingClientRect(),i=t.clientX-e.left,o=t.clientY-e.top;n.setPosition(i,o),null!==s&&n.draw(s)})),window.addEventListener("resize",(function(){console.log(window.innerWidth),h.width=window.innerWidth,h.height=window.innerHeight,h.style.position="absolute",h.style.top="0",h.style.left="0"})),window.addEventListener("keydown",(function(e){e.code===t.Left&&c.moveLeft(),e.code===t.Right&&c.moveRight(),e.code===t.Up&&c.jump()})),window.addEventListener("keyup",(function(e){console.log(e),e.code!==t.Left&&e.code!==t.Right||c.stopX()})),requestAnimationFrame((function t(){!function(t){null==s||s.clearRect(0,0,h.width,h.height);for(var e=0,i=t;e<i.length;e++){null!==s&&i[e].draw(s)}}(d),requestAnimationFrame(t)}))})();